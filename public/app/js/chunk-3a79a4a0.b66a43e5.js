(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a79a4a0"],{"3cfd":function(e,t,a){},"423b":function(e,t,a){"use strict";a.r(t);var l=a("7a23");const c=Object(l["reactive"])({search:{text:null,phone:null,sex:"all"},searchLast:{},users:{all:[],paginated:null},genders:["male","female","all"]}),s=Object(l["computed"])(()=>/^[a-zA-Z0-9.@]+$/.test(c.search.text)),n=async(e=!1)=>{var t;let a=null===(t=c.users.paginated)||void 0===t?void 0:t.next_page_url;if(!e&&null===a)return;let l=a||"/api/user";return axios({method:"get",url:l,params:c.search}).then(({data:e})=>{c.users.paginated=e,a?c.users.all.push(...Object.values(e.data)):c.users.all=e.data})};var r=()=>({...Object(l["toRefs"])(c),getUsers:n,validateText:s}),o=a("eca6");const d={class:"container"},i={class:"row"},u=Object(l["createElementVNode"])("div",{class:"col-12 mt-4"},[Object(l["createElementVNode"])("label",{for:"search"},"User search:")],-1),b={class:"col-md-8"},m={class:"search-container"},j={class:"index-users"},O=Object(l["createElementVNode"])("img",{class:"img-fluid img-circle",src:"https://img.freepik.com/premium-vector/cute-robot-logo-vector-design-template_612390-492.jpg"},null,-1),p={class:"media-body px-2"},g={class:"item d-flex"},h=Object(l["createElementVNode"])("div",{class:"label me-2"},"email:",-1),v={class:"content"},f={class:"item d-flex"},V=Object(l["createElementVNode"])("div",{class:"label me-2"},"name:",-1),x={class:"content"},N={key:0,class:"item d-flex"},E=Object(l["createElementVNode"])("div",{class:"label me-2"},"lives in",-1),C={class:"content"},y={class:"item d-flex"},k=Object(l["createElementVNode"])("div",{class:"label me-2"},"phone:",-1),w={class:"content"},_=Object(l["createTextVNode"])("send"),B={class:"col-md-4 search-filters"},U={class:"dialog-footer"},S=Object(l["createTextVNode"])("Cancel"),T=Object(l["createTextVNode"])("Send");var D={setup(e){const{search:t,validateText:a,users:c,genders:s,getUsers:n}=r(),{sendMessage:D,activeChat:I}=Object(o["a"])(),M=Object(l["ref"])({dialog:!1}),A=e=>{M.value.dialog=!M.value.dialog,I.value.message.user_id=e};return(e,r)=>{var o;const L=Object(l["resolveComponent"])("icon"),z=Object(l["resolveComponent"])("el-button"),$=Object(l["resolveComponent"])("el-input"),F=Object(l["resolveComponent"])("infinite-scroll"),J=Object(l["resolveComponent"])("el-radio-button"),R=Object(l["resolveComponent"])("el-radio-group"),G=Object(l["resolveComponent"])("el-dialog");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",d,[Object(l["createElementVNode"])("div",i,[u,Object(l["createElementVNode"])("div",b,[Object(l["createElementVNode"])("div",m,[Object(l["createVNode"])($,{placeholder:"Введите текст",modelValue:Object(l["unref"])(t).text,"onUpdate:modelValue":r[1]||(r[1]=e=>Object(l["unref"])(t).text=e),clearable:""},{append:Object(l["withCtx"])(()=>[Object(l["createVNode"])(z,{class:"d-flex align-items-center",disabled:!Object(l["unref"])(a),onClick:r[0]||(r[0]=e=>Object(l["unref"])(n)(!0))},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(L,{name:"typcn icon typcn-zoom-outline",size:20})]),_:1},8,["disabled"])]),_:1},8,["modelValue"]),Object(l["createVNode"])(F,{id:"users",page:null===(o=Object(l["unref"])(c).paginated)||void 0===o?void 0:o.current_page,onLoadData:r[2]||(r[2]=e=>Object(l["unref"])(n)())},{content:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",j,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(Object(l["unref"])(c).all,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:"user-card border rounded-2 p-2 align-items-center d-flex mt-3"},[O,Object(l["createElementVNode"])("div",p,[Object(l["createElementVNode"])("div",g,[h,Object(l["createElementVNode"])("div",v,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("div",f,[V,Object(l["createElementVNode"])("div",x,Object(l["toDisplayString"])(e.firstname)+" "+Object(l["toDisplayString"])(e.lastname),1)]),e.city?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",N,[E,Object(l["createElementVNode"])("div",C,Object(l["toDisplayString"])(e.city),1)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",y,[k,Object(l["createElementVNode"])("div",w,Object(l["toDisplayString"])(e.phone||"-"),1)]),Object(l["createVNode"])(z,{onClick:t=>A(e.id)},{default:Object(l["withCtx"])(()=>[_]),_:2},1032,["onClick"])])]))),128))])]),_:1},8,["page"])])]),Object(l["createElementVNode"])("div",B,[Object(l["createVNode"])($,{placeholder:"Enter your phone number",modelValue:Object(l["unref"])(t).phone,"onUpdate:modelValue":r[3]||(r[3]=e=>Object(l["unref"])(t).phone=e),clearable:""},null,8,["modelValue"]),Object(l["createVNode"])($,{class:"mt-2",clearable:"",placeholder:"Enter the city",modelValue:Object(l["unref"])(t).city,"onUpdate:modelValue":r[4]||(r[4]=e=>Object(l["unref"])(t).city=e)},null,8,["modelValue"]),Object(l["createVNode"])(R,{class:"mt-2",modelValue:Object(l["unref"])(t).sex,"onUpdate:modelValue":r[5]||(r[5]=e=>Object(l["unref"])(t).sex=e)},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(Object(l["unref"])(s),e=>(Object(l["openBlock"])(),Object(l["createBlock"])(J,{label:e,key:e},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),Object(l["createVNode"])(G,{modelValue:M.value.dialog,"onUpdate:modelValue":r[9]||(r[9]=e=>M.value.dialog=e),title:"Message",width:"30%",center:""},{footer:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("span",U,[Object(l["createVNode"])(z,{onClick:r[7]||(r[7]=e=>M.value.dialog=!1)},{default:Object(l["withCtx"])(()=>[S]),_:1}),Object(l["createVNode"])(z,{disabled:""==Object(l["unref"])(I).message.text,type:"primary",onClick:r[8]||(r[8]=e=>(M.value.dialog=!1,Object(l["unref"])(D)()))},{default:Object(l["withCtx"])(()=>[T]),_:1},8,["disabled"])])]),default:Object(l["withCtx"])(()=>[Object(l["createVNode"])($,{modelValue:Object(l["unref"])(I).message.text,"onUpdate:modelValue":r[6]||(r[6]=e=>Object(l["unref"])(I).message.text=e),type:"textarea"},null,8,["modelValue"])]),_:1},8,["modelValue"])])])}}};a("886a");const I=D;t["default"]=I},"886a":function(e,t,a){"use strict";a("3cfd")},eca6:function(e,t,a){"use strict";var l=a("7a23"),c=a("e01f");const s=Object(l["reactive"])({chats:{ids:[],all:[],paginatedIds:null,paginated:null,currentId:null},messages:{},messagesAll:{},activeChat:{message:{text:""}}}),n=(e,t)=>{let a=e[0];if(!a)return;let l=s.chats.all[t],n="";l.length>1&&l.forEach(e=>{n+=e.firstname+","});let r="private"===a.type?a.firstname:a.title||n;return c["a"].sliceWord(r,15)},r=async()=>{var e;let t=s.chats.paginatedIds,a=null===(e=s.chats.paginatedIds)||void 0===e?void 0:e.next_page_url;if(t&&null===a)return;let l=a||"/api/chats-id";return await axios({method:"post",url:l}).then(({data:e})=>{if(e)return s.chats.paginatedIds=e,e.data})},o=async()=>{var e;let t=s.chats.ids;if(t&&t.total===s.chats.all.length)return;let a=null===(e=s.chats.paginated)||void 0===e?void 0:e.next_page_url;if(null===a)return;let l=a||"/api/chat";return await axios({method:"get",url:l}).then(e=>{200===e.status&&(s.chats.all.push(...Object.values(e.data.chatGrouped)),s.chats.paginated=e.data.chats)})},d=async e=>{var t;let a=null===(t=s.messages[e])||void 0===t?void 0:t.next_page_url;if(s.messages[e]&&null===a)return;let l=a||`/api/chat/${e}/message`;return await axios({method:"get",url:l}).then(t=>{s.chats.currentId=e,200===t.status&&(s.messages[e]=t.data,"undefined"===typeof s.messagesAll[e]?s.messagesAll[e]=t.data.data.reverse():s.messagesAll[e].unshift(...t.data.data.reverse()))})},i=async(e=null)=>await axios({method:"post",url:`/api/chat/${e}/message`,data:{...s.activeChat.message,chat_id:e}}).then(()=>{s.activeChat.message.text=""}).catch(({response:e})=>{ElNotification({title:"Error:",dangerouslyUseHTMLString:!0,message:c["a"].getErrorsMessage(e),type:"error",duration:6e3})});t["a"]=()=>({...Object(l["toRefs"])(s),getChats:o,getChatsId:r,sendMessage:i,getMessages:d,getChatTitle:n})}}]);